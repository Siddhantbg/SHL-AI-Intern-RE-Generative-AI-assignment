<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="SHL Assessment Recommendation System - Find relevant SHL assessments based on job descriptions"
    />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <title>SHL Assessment Recommender</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <script>
      console.log('ğŸŒ HTML loaded');
      
      // Create the app directly in HTML/JS if React fails
      function createFallbackApp() {
        const root = document.getElementById('root');
        root.innerHTML = `
          <div style="min-height: 100vh; background-color: #f3f4f6; padding: 20px; font-family: Arial, sans-serif;">
            <div style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto;">
              <h1 style="font-size: 32px; font-weight: bold; color: #1f2937; margin: 0 0 16px 0; text-align: center;">
                ğŸ¯ SHL Assessment Recommender
              </h1>
              
              <p style="font-size: 16px; color: #6b7280; margin: 0 0 24px 0; text-align: center;">
                Find the right assessments for your hiring needs
              </p>

              <div style="background-color: #f9fafb; padding: 20px; border-radius: 6px; border: 1px solid #e5e7eb; margin-bottom: 20px;">
                <h2 style="font-size: 18px; margin: 0 0 12px 0; color: #374151;">ğŸš€ System Status</h2>
                <p style="margin: 0; color: #059669;">âœ… Frontend: Successfully deployed on Vercel</p>
                <p id="api-status" style="margin: 8px 0 0 0; color: #f59e0b;">ğŸ”„ Backend: Checking connection...</p>
              </div>

              <div style="background-color: #eff6ff; padding: 20px; border-radius: 6px; border: 1px solid #bfdbfe; margin-bottom: 20px;">
                <h3 style="font-size: 16px; margin: 0 0 12px 0; color: #1e40af;">ğŸ“ Quick Test</h3>
                <input type="text" id="query-input" placeholder="Enter job description..." style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 4px; margin-bottom: 10px;">
                <button onclick="testAPI()" style="background-color: #3b82f6; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Test API Connection</button>
                <div id="test-result" style="margin-top: 10px;"></div>
              </div>
            </div>
          </div>
        `;
        
        // Test API connection
        testAPIConnection();
      }
      
      function testAPIConnection() {
        const apiUrl = 'https://shl-ai-intern-re-generative-ai-assignment.onrender.com';
        const statusEl = document.getElementById('api-status');
        
        fetch(apiUrl + '/health')
          .then(response => {
            if (response.ok) {
              statusEl.innerHTML = 'âœ… Backend: Online and connected';
              statusEl.style.color = '#059669';
            } else {
              statusEl.innerHTML = 'âŒ Backend: Error ' + response.status;
              statusEl.style.color = '#dc2626';
            }
          })
          .catch(error => {
            statusEl.innerHTML = 'âŒ Backend: Connection failed';
            statusEl.style.color = '#dc2626';
            console.error('API Error:', error);
          });
      }
      
      function testAPI() {
        const query = document.getElementById('query-input').value;
        const resultEl = document.getElementById('test-result');
        
        if (!query) {
          resultEl.innerHTML = '<p style="color: #f59e0b;">Please enter a job description</p>';
          return;
        }
        
        resultEl.innerHTML = '<p style="color: #3b82f6;">ğŸ”„ Testing API...</p>';
        
        fetch('https://shl-ai-intern-re-generative-ai-assignment.onrender.com/recommend', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ query: query })
        })
        .then(response => response.json())
        .then(data => {
          resultEl.innerHTML = `<p style="color: #059669;">âœ… API Test Successful!</p><pre style="background: #f3f4f6; padding: 10px; border-radius: 4px; font-size: 12px; overflow-x: auto;">${JSON.stringify(data, null, 2)}</pre>`;
        })
        .catch(error => {
          resultEl.innerHTML = `<p style="color: #dc2626;">âŒ API Test Failed: ${error.message}</p>`;
        });
      }
      
      // Try React first, fallback to HTML if it fails
      setTimeout(() => {
        const rootContent = document.getElementById('root').innerHTML;
        if (!rootContent || rootContent.trim() === '') {
          console.log('ğŸ”„ React failed, using fallback app');
          createFallbackApp();
        }
      }, 3000);
    </script>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
